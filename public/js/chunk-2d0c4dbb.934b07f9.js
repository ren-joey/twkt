(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4dbb"],{"3d2f":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.UserInfo&&"Y"===e.UserInfo.is_login?a("v-app",[a("Navigation"),a("Header"),a("Material"),a("DialogContact")],1):e._e()},l=[],r=a("5530"),s=a("2f62"),n=a("ad1b"),o=a("608b"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-main",{scopedSlots:e._u([{key:"prepend",fn:function(){return[a("v-list-item",{attrs:{twoLine:""}},[a("v-list-item-avatar",[a("img",{attrs:{src:"https://randomuser.me/api/portraits/women/81.jpg"}})]),a("v-list-item-content",[a("v-list-item-title",[e._v("Jane Smith")]),a("v-list-item-subtitle",[e._v("Logged In")])],1)],1)]},proxy:!0}])},[e.$route.params.material_id?a("v-container",[a("v-breadcrumbs",{attrs:{items:e.history},scopedSlots:e._u([{key:"divider",fn:function(){return[a("v-icon",[e._v("mdi-chevron-right")])]},proxy:!0}])}),a("MaterialDetail")],1):a("v-container",[a("v-breadcrumbs",{attrs:{items:e.history},scopedSlots:e._u([{key:"divider",fn:function(){return[a("v-icon",[e._v("mdi-chevron-right")])]},proxy:!0}],null,!1,3681283568)}),a("MaterialTable",{attrs:{subtitle:e.subtitle}}),"user"!==e.PermissionName&&"guest"!==e.PermissionName?a("v-btn",{attrs:{bottom:"",color:"pink",dark:"",fab:"",fixed:"",right:""},on:{click:function(t){return e.bus.$emit("addMaterial")}}},[a("v-icon",[e._v("mdi-plus")])],1):e._e()],1),a("DialogAddMaterial")],1)},d=[],m=a("f5ef"),u=a("b694"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",{staticClass:"mx-auto my-4",attrs:{width:"100%"}},[a("v-card-title",{staticClass:"headline d-flex justify-space-between align-center"},[a("div",{staticClass:"d-flex align-center"},[a("v-icon",{staticClass:"mr-2"},[e._v("mdi-semantic-web")]),e._v(" "+e._s(e.subtitle)+" ")],1),"user"!==e.PermissionName&&"guest"!==e.PermissionName?a("div",{staticClass:"mr-4"},[a("v-btn",{attrs:{fab:"",dark:"",color:"pink",small:""},on:{click:function(t){return e.bus.$emit("addMaterial",e.id)}}},[a("v-icon",[e._v("mdi-plus")])],1)],1):e._e()]),a("v-card-text",[a("v-divider"),a("v-data-table",{attrs:{headers:e.headers,items:e.Materials,singleExpand:e.singleExpand,expanded:e.expanded,showExpand:"",itemKey:"serial_number",showSelect:"agent"===e.PermissionName||"admin"===e.PermissionName},on:{"update:expanded":function(t){e.expanded=t},"click:row":e.rowClickHandler},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-dialog",{attrs:{maxWidth:"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",{attrs:{loading:"Y"===e.Fetching.actionEditMaterial}},[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Dessert name"},model:{value:e.editedItem.name,callback:function(t){e.$set(e.editedItem,"name",t)},expression:"editedItem.name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Calories"},model:{value:e.editedItem.calories,callback:function(t){e.$set(e.editedItem,"calories",t)},expression:"editedItem.calories"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Fat (g)"},model:{value:e.editedItem.fat,callback:function(t){e.$set(e.editedItem,"fat",t)},expression:"editedItem.fat"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Carbs (g)"},model:{value:e.editedItem.carbs,callback:function(t){e.$set(e.editedItem,"carbs",t)},expression:"editedItem.carbs"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[a("v-text-field",{attrs:{label:"Protein (g)"},model:{value:e.editedItem.protein,callback:function(t){e.$set(e.editedItem,"protein",t)},expression:"editedItem.protein"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v(" Cancel ")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.save}},[e._v(" Save ")])],1)],1)],1)]},proxy:!0},"user"!==e.PermissionName&&"guest"!==e.PermissionName?{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}}:null,{key:"expanded-item",fn:function(t){var i=t.item;return[a("td",{attrs:{colspan:e.headers.length}},[a("v-row",[a("v-col",{attrs:{cols:"4"}},[e._v(" 專利 "),a("v-divider"),e._v(" "+e._s(i.patent)+" ")],1),a("v-col",{attrs:{cols:"4"}},[e._v(" 認證 "),a("v-divider"),e._v(" "+e._s(i.certification)+" ")],1),a("v-col",{attrs:{cols:"4"}},[e._v(" 臨床研究/文獻 "),a("v-divider"),e._v(" "+e._s(i.report)+" ")],1)],1)],1)]}}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)],1)},p=[],f=(a("c975"),a("a434"),{props:{id:{type:String,default:""},subtitle:{type:String,default:""}},data:function(){return{bus:m["a"],dialog:!1,singleSelect:!1,selected:[],singleExpand:!1,expanded:[],editedIndex:-1,editedItem:{material_id:"",material_name:"",material_source:"",material_spec_1:"",material_spec_2:"",material_origin:"",material_patent:"",material_certification:"",material_clinic:"",material_fn:""}}},computed:Object(r["a"])(Object(r["a"])({formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"},headers:function(){return"user"===this.PermissionName||"guest"===this.PermissionName?[{text:"編號",align:"start",value:"serial_number"},{text:"原料名稱",value:"name"},{text:"來源",value:"origin_name"},{text:"規格1",value:"spec_1"},{text:"規格2",value:"spec_2"},{text:"產地",value:"origin"},{text:"功能",value:"function"},{text:"",value:"data-table-expand"}]:[{text:"編號",align:"start",value:"serial_number"},{text:"原料名稱",value:"name"},{text:"來源",value:"origin_name"},{text:"規格1",value:"spec_1"},{text:"規格2",value:"spec_2"},{text:"產地",value:"origin"},{text:"功能",value:"function"},{text:"操作",value:"actions",sortable:!1},{text:"",value:"data-table-expand"}]}},Object(s["c"])({PermissionName:"getPermissionName"})),Object(s["d"])(["Fetching","Materials","UserInfo"])),watch:{dialog:function(e){e||this.close()}},mounted:function(){0===this.Materials.length&&this.$store.dispatch("actionFetchMaterials")},methods:{editItem:function(e){this.editedIndex=this.materials.indexOf(e),this.editedItem=Object(r["a"])({},e),this.dialog=!0},deleteItem:function(e){var t=window,a=t.confirm,i=this.materials.indexOf(e);a("Are you sure you want to delete this item?")&&this.materials.splice(i,1)},close:function(){var e=this;this.dialog=!1,setTimeout((function(){e.editedItem=Object(r["a"])({},e.defaultItem),e.editedIndex=-1}),300)},save:function(){var e=this;this.fetching.editMaterial="Y",setTimeout((function(){e.fetching.editMaterial="N",e.editedIndex>-1?Object.assign(e.materials[e.editedIndex],e.editedItem):e.materials.push(e.editedItem),e.close()}),2e3)},rowClickHandler:function(e){this.$router.push({name:"material",params:{material_id:e.id}})}}}),b=f,x=a("2877"),_=a("6544"),h=a.n(_),g=a("8336"),I=a("b0af"),k=a("99d9"),w=a("62ad"),C=a("a523"),$=a("8fea"),V=a("169a"),O=a("ce7e"),N=a("132d"),y=a("0fd9"),j=a("2fa4"),M=a("8654"),A=Object(x["a"])(b,v,p,!1,null,null,null),S=A.exports;h()(A,{VBtn:g["a"],VCard:I["a"],VCardActions:k["a"],VCardText:k["c"],VCardTitle:k["d"],VCol:w["a"],VContainer:C["a"],VDataTable:$["a"],VDialog:V["a"],VDivider:O["a"],VIcon:N["a"],VRow:y["a"],VSpacer:j["a"],VTextField:M["a"]});var P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.material?a("div",[a("v-card",{staticClass:"mx-auto my-4",attrs:{maxWidth:"800"}},[a("v-card-title",{staticClass:"headline d-flex justify-space-between align-center"},[a("div",{staticClass:"d-flex align-center"},[e._v(" 原物料資料 ")])]),a("v-card-text",[a("v-divider"),a("v-form",[a("v-container",[a("v-row",{staticClass:"align-center"},[a("v-col",{attrs:{cols:"4",md:"2"}},[a("v-text-field",{attrs:{label:"流水號",disabled:"",dense:""},model:{value:e.material.serial_number,callback:function(t){e.$set(e.material,"serial_number",t)},expression:"material.serial_number"}})],1),a("v-col",{attrs:{cols:"6",md:"4"}},[a("v-text-field",e._b({attrs:{counter:"N"!==e.editMode&&32,label:"名稱"},model:{value:e.material.name,callback:function(t){e.$set(e.material,"name",t)},expression:"material.name"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"MOQ",prependIcon:"mdi-identifier"},model:{value:e.material.moq,callback:function(t){e.$set(e.material,"moq",t)},expression:"material.moq"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"8"}},[a("v-text-field",e._b({attrs:{label:"規格一",prependIcon:"mdi-email"},model:{value:e.material.spec_1,callback:function(t){e.$set(e.material,"spec_1",t)},expression:"material.spec_1"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",e._b({attrs:{label:"規格二",prependIcon:"mdi-phone"},model:{value:e.material.spec_2,callback:function(t){e.$set(e.material,"spec_2",t)},expression:"material.spec_2"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6"}},[a("v-text-field",e._b({attrs:{label:"原廠名稱",prependIcon:"mdi-fax"},model:{value:e.material.origin_name,callback:function(t){e.$set(e.material,"origin_name",t)},expression:"material.origin_name"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",e._b({attrs:{label:"原料產地",prependIcon:"mdi-map-marker"},model:{value:e.material.origin,callback:function(t){e.$set(e.material,"origin",t)},expression:"material.origin"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",e._b({attrs:{label:"專利",prependIcon:"mdi-web"},model:{value:e.material.patent,callback:function(t){e.$set(e.material,"patent",t)},expression:"material.patent"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"認證",prependIcon:"mdi-card-account-phone"},model:{value:e.material.certification,callback:function(t){e.$set(e.material,"certification",t)},expression:"material.certification"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",e._b({attrs:{label:"臨床研究/文獻報告",prependIcon:"mdi-face-agent"},model:{value:e.material.report,callback:function(t){e.$set(e.material,"report",t)},expression:"material.report"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"功能",prependIcon:"mdi-account-tie"},model:{value:e.material.function,callback:function(t){e.$set(e.material,"function",t)},expression:"material.function"}},"v-text-field",e.inputAttributes,!1))],1),a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"原料來源含有過敏原",prependIcon:"mdi-card-account-phone"},model:{value:e.material.allergen,callback:function(t){e.$set(e.material,"allergen",t)},expression:"material.allergen"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"原料特性",prependIcon:"mdi-account-tie"},model:{value:e.material.feature,callback:function(t){e.$set(e.material,"feature",t)},expression:"material.feature"}},"v-text-field",e.inputAttributes,!1))],1),a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"加工製程",prependIcon:"mdi-card-account-phone"},model:{value:e.material.process,callback:function(t){e.$set(e.material,"process",t)},expression:"material.process"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"適用劑型",prependIcon:"mdi-account-tie"},model:{value:e.material.dosage_form,callback:function(t){e.$set(e.material,"dosage_form",t)},expression:"material.dosage_form"}},"v-text-field",e.inputAttributes,!1))],1),a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"可供食品使用原料彙整一覽表",prependIcon:"mdi-card-account-phone"},model:{value:e.material.list,callback:function(t){e.$set(e.material,"list",t)},expression:"material.list"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"衛福部法規限制",prependIcon:"mdi-account-tie"},model:{value:e.material.gov_limit,callback:function(t){e.$set(e.material,"gov_limit",t)},expression:"material.gov_limit"}},"v-text-field",e.inputAttributes,!1))],1),a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"建議劑量",prependIcon:"mdi-card-account-phone"},model:{value:e.material.dosage_amount,callback:function(t){e.$set(e.material,"dosage_amount",t)},expression:"material.dosage_amount"}},"v-text-field",e.inputAttributes,!1))],1)],1),a("v-row",[a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"上傳產品資訊 (jpg./pdf.檔案)",prependIcon:"mdi-account-tie"},model:{value:e.material.image_json,callback:function(t){e.$set(e.material,"image_json",t)},expression:"material.image_json"}},"v-text-field",e.inputAttributes,!1))],1),a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"常備庫存",prependIcon:"mdi-card-account-phone"},model:{value:e.material.cuzo,callback:function(t){e.$set(e.material,"cuzo",t)},expression:"material.cuzo"}},"v-text-field",e.inputAttributes,!1))],1),a("v-col",{attrs:{cols:"6",sm:"4"}},[a("v-text-field",e._b({attrs:{label:"其他",prependIcon:"mdi-card-account-phone"},model:{value:e.material.comment,callback:function(t){e.$set(e.material,"comment",t)},expression:"material.comment"}},"v-text-field",e.inputAttributes,!1))],1)],1),"N"===e.editMode?a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"ma-2",attrs:{color:"success",xLarge:""},on:{click:function(t){e.editMode="Y"}}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-pencil")]),e._v(" 修改 ")],1)],1):a("div",{staticClass:"d-flex justify-center"},[a("v-btn",{staticClass:"ma-2",attrs:{text:"",color:"grey",xLarge:""},on:{click:e.editCancel}},[e._v(" 取消 ")]),a("v-btn",{staticClass:"ma-2",attrs:{color:"primary",xLarge:"",loading:"Y"===e.editUserFetching},on:{click:e.editSubmit}},[a("v-icon",{attrs:{left:""}},[e._v("mdi-check")]),e._v(" 確認修改 ")],1)],1)],1)],1)],1)],1)],1):e._e()},T=[],F=(a("d3b7"),a("bc3a")),D=a.n(F),U={data:function(){return{bus:m["a"],material:void 0,materialOrigin:void 0,editMode:"N",editMaterialFetching:"N"}},computed:Object(r["a"])(Object(r["a"])({inputAttributes:function(){return[{disabled:"N"===this.editMode},{filled:!0},{rounded:!0},{dense:!0}]},badgeColor:function(){var e=this.UserInfo.permission_group.col_name;return["user","guest"].indexOf(e)>-1?{textColor:"white",color:"success"}:"agent"===e?{textColor:"indigo",color:"white"}:"company"===e?{textColor:"white",color:"teal"}:{textColor:"white",color:"indigo"}}},Object(s["c"])({PermissionName:"getPermissionName"})),Object(s["d"])(["Fetching","Users","UserInfo"])),watch:{dialog:function(e){e||this.close()}},mounted:function(){this.fetchMaterialData()},methods:{fetchMaterialData:function(){var e=this;D()({method:"GET",url:"api/material/".concat(this.$route.params.material_id)}).then((function(t){t.data.id||e.$router.push({name:"material"}),e.material=t.data,e.materialOrigin=JSON.parse(JSON.stringify(t.data))})).catch((function(e){alert(e)}))},editCancel:function(){this.material=JSON.parse(JSON.stringify(this.materialOrigin)),this.editMode="N"},editSubmit:function(){var e=this;"Y"!==this.editUserFetching&&(this.editUserFetching="Y",D()({method:"PATCH",url:"api/user/".concat(this.$route.params.user_id),params:this.user.user_information}).then((function(t){e.user=t.data,e.userOrigin=JSON.parse(JSON.stringify(t.data)),e.$store.dispatch("actionFetchUsers")})).catch((function(e){alert(e)})).finally((function(){e.editUserFetching="N",e.editMode="N"})))}}},E=U,L=a("4bd4"),J=Object(x["a"])(E,P,T,!1,null,null,null),Y=J.exports;h()(J,{VBtn:g["a"],VCard:I["a"],VCardText:k["c"],VCardTitle:k["d"],VCol:w["a"],VContainer:C["a"],VDivider:O["a"],VForm:L["a"],VIcon:N["a"],VRow:y["a"],VTextField:M["a"]});var H={components:{DialogAddMaterial:u["a"],MaterialTable:S,MaterialDetail:Y},data:function(){return{bus:m["a"],subtitle:"總覽"}},computed:Object(r["a"])(Object(r["a"])({history:function(){var e=[{text:"原物料"}];return this.$route.params.material_id&&(e[0].href="/#/material",0===this.$route.params.material_id?e.push({text:"創建原物料"}):e.push({text:"原物料資料"})),e}},Object(s["c"])({PermissionName:"getPermissionName"})),Object(s["d"])(["Materials"]))},B=H,q=a("2bc5"),z=a("da13"),R=a("8270"),W=a("5d23"),G=a("f6c4"),K=Object(x["a"])(B,c,d,!1,null,null,null),Q=K.exports;h()(K,{VBreadcrumbs:q["a"],VBtn:g["a"],VContainer:C["a"],VIcon:N["a"],VListItem:z["a"],VListItemAvatar:R["a"],VListItemContent:W["a"],VListItemSubtitle:W["b"],VListItemTitle:W["c"],VMain:G["a"]});var X=a("dc50"),Z={components:{Navigation:o["a"],Header:n["a"],Material:Q,DialogContact:X["a"]},computed:Object(r["a"])({},Object(s["d"])(["UserInfo"]))},ee=Z,te=a("7496"),ae=Object(x["a"])(ee,i,l,!1,null,null,null);t["default"]=ae.exports;h()(ae,{VApp:te["a"]})}}]);
//# sourceMappingURL=chunk-2d0c4dbb.934b07f9.js.map